http:
  routers:
    comunication-ws:
      rule: "PathPrefix(`/ws-message`)"
      entryPoints:
        - web
      service: communication-service
#      middlewares:
#        - strip-ws-prefix
    gateway-api:
      rule: "PathPrefix(`/api`)"
      entryPoints:
        - web
      service: gateway-service
      middlewares:
        - strip-api-prefix
    frontend:
      rule: "PathPrefix(`/myapp`)"
      entryPoints:
        - web
      service: frontend-service
      middlewares:
        - strip-myapp-prefix

  middlewares:
    strip-api-prefix:
      stripPrefix:
        prefixes:
          - "/api"
    strip-myapp-prefix:
      stripPrefix:
        prefixes:
          - "/myapp"
    strip-ws-prefix:
      stripPrefix:
        prefixes:
          - "/ws-message"

  services:
    communication-service:
      loadBalancer:
        servers:
          - url: "http://communication-service:8091"
    gateway-service:
      loadBalancer:
        servers:
          - url: "http://gateway-service:8084"
    frontend-service:
      loadBalancer:
        servers:
          - url: "http://frontend-service:80"
